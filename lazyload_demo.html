<!DOCTYPE html>
<html lang="en">
<head>
  <script src="js/jquery.min.js"></script>
  <script>
	/*
	   @作者：外号老徐
	   @日期：2015.04.25
	   @邮箱：442413729@qq.com
	   @网址：http://www.loveqiao.com
	*/
	function imgLazyLoad(options) {
		var settings = {
			Id: $('img'),
			threshold: 100,
			effectspeed: 0,
			effect: "fadeIn"
		};
		$.extend(settings, options);
		var $this = settings.Id;

		var timeout = null;
		$(window).bind('load resize', loadImg);//给窗口绑定两个load和resize两个事件
		$(window).scroll(function () { //给窗口滚动条滚动事件绑定函数
			if (timeout) { clearTimeout(timeout); }
			timeout = setTimeout(loadImg ? loadImg : "", 100);//滚动后100ms开始判断要不要执行loadImg
		});
		return $this.each(function (i) {
			var self = this;
			//$(self).data('t', $(self).offset().top)
			if (belowthefold(self)) {
				self.loaded = false;//?
			} else {
				if ($(self).is(':visible')) {//选取所有可见元素
					$(self).attr("src", $(self).attr("original"));
					self.loaded = true;
				}
			}
			$(self).one("appear",//绑定加载时事件,事件只运行一次
				function () {
					if (!this.loaded) {
						$("<img />").bind("load", //该事件适用于任何带有 URL 的元素（比如图像、脚本、框架、内联框架）加载完成时会触发该事件适用于任何带有 URL 的元素（比如图像、脚本、框架、内联框架）的事件
						function () {
							$(self).hide().attr("src", $(self).attr("original"))[settings.effect](settings.effectspeed);//这个中括号几个意思
							//加载完成才换load是几个意思？
							self.loaded = true;
						}).attr("src", $(self).attr("original"));//把图片的src改为要展示的。
					}
				});
		});
		function loadImg() {
			settings.Id.each(function () {
				if (!belowthefold(this)) {
					if ($(this).is(':visible')) {
						$(this).trigger("appear");
					}
				}
			});
		}
		function belowthefold(element) {//t表示还没到时机
			var fold = $(window).height() + $(window).scrollTop();//star
			return fold <= $(element).offset().top - settings.threshold;
		};
	}
	imgLazyLoad({threshold:0,effectspeed:800})
</script>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  
  
</head>

<body>
 	<div>
 		<img original="images/bag.png" style="width:200px; height:300px;"/>
 	</div>
</body>
</html>